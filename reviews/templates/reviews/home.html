{% extends "base.html" %}
{% load reviews_extras %}
{% block content %}
    <h2>Votre Flux</h2>
    <div class="flex-container">
        {% for instance in paged_posts %}
            {% if instance|model_type == "Ticket" %}
                {% include "reviews/partials/ticket_snippet.html" with ticket=instance %}
            {% elif instance|model_type == "Review" %}
                {% include "reviews/partials/review_snippet.html" with review=instance %}
            {% endif %}
        {% endfor %}
    </div>

    <span class="pagination">
        {% if paged_posts.has_previous %}
            <a href="?page=1">« première</a>
            <a href="?page={{ paged_posts.previous_page_number }}">précedente</a>
        {% endif %}
        <span>
            Page {{ paged_posts.number }} de {{ paged_posts.paginator.num_pages }}.
        </span>
        {% if paged_posts.has_next %}
            <a href="?page={{ paged_posts.next_page_number }}">suivante</a>
            <a href="?page={{ paged_posts.paginator.num_pages }}">dernière »</a>
        {% endif %}
    </span>
{% endblock content %}